@model BannerDataDictionary.Models.TableDetailsModel

@{
    ViewBag.Title = "Table Details";
}

@Styles.Render("~/Content/DataTables-1.9.4/media/css/dataTables")

@section subhead
{
    <h1>@ViewBag.Message</h1>

    <div>
        <h2>Banner.@Model.Owner.@Model.TableName</h2>
         <h5>
             <p>@Model.TableComments</p>
             @*<p>Comments...</p>*@
             <p>Num Rows: @Model.NumRows</p>
    </h5>	
    </div>
}

@section subnav
{
    <li>@Html.ActionLink("Table Listing", "Index", "Home")</li>
    <li class="active">@Html.ActionLink("Table Details", "Details", "Home", null, new { id = @Model.TableName })</li>
}

@section AdditionalScripts
{
    @Scripts.Render("~/bundles/datatables")

    <script type="text/javascript">
        $(function () {
            var oTable = $(".table").dataTable({
                "aaSorting": [[0, "asc"]], //Default sort on second column
                //"aoColumnDefs": [
                //    //{ 'bSortable': false, 'aTargets': [0, 5] } //Disables sort on icon columns
                //]
            });
            var oTable2 = $('#IndexTable').dataTable({
                "bSort": false,
                "bPaginate": false,
                "bInfo":false           
            });
            var oTable3 = $('#ConstraintTable').dataTable({
                "bSort": false,
                "bPaginate": false,
                "bInfo": false
            });

        });
    </script>
    
}

<table class="table table-striped table-bordered table-hover">
    <thead>
        <tr>
            @*<th></th>*@
            <th>#</th>
            <th>Column Name</th>
            <th>Comments</th>			
            <th>Data Type</th>
            <th>Length</th>
            <th>Precision</th>
            <th>Scale</th>
            <th>Nullable?</th>
            @*<th></th>*@		
        </tr>
    </thead>
    <tbody>
       
        @foreach (var item in Model.Columns)
        {
            <tr>
                @*<td></td>*@
                <td>@item.ColumnId</td>
                <td>@item.ColumnName</td>
                <td>@item.ColumnComments</td>
                <td>@item.DataType</td>
                <td>@item.DataLength</td>
                <td>@item.DataPrecision</td>
                <td>@item.DataScale</td>
                <td>@item.Nullable</td>
                @*<td></td>*@
            </tr>
        }
    </tbody>
</table>
<hr/>
<h3>Indexes</h3>
<table id="IndexTable" class="table-bordered table-striped">
    <thead>
        <tr>
            <th>Position</th>
            <th>Index Name</th>
            <th>Column Name</th>
            <th>Uniqueness</th>
            <th>Distinct Keys</th>
            <th>Sort Order</th>
        </tr>
    </thead>
    <tbody>
       
        @foreach (var item in Model.Indexes)
        {
            <tr>
                <td>@item.ColumnPosition</td>
                <td>@item.IndexName</td>
                <td>
                    @item.ColumnName
                </td>
                <td>@item.Uniqueness</td>
                <td>@item.DistinctKeys</td>
                <td>@item.SortOrder</td>
            </tr>
        }
    </tbody>
</table>
<hr/>
<h3>Constraints</h3>
<table id="ConstraintTable" class="table-bordered table-striped">
    <thead>
        <tr>
            <th>Position</th>
            <th>Constraint Name</th>
            <th>Column Name</th>
            <th>Constraint Type</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
       
        @foreach (var item in Model.Constraints)
        {
            <tr>
                <td>@item.ColumnPosition</td>
                <td>@item.ConstraintName</td>
                <td>
                    @item.ColumnName
                </td>
                <td>@item.ConstraintType</td>
                <td>@item.Status</td>
            </tr>
        }
    </tbody>
</table>
